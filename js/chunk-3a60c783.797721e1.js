(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a60c783"],{"0b42":function(t,e,c){var n=c("da84"),a=c("e8b5"),o=c("68ee"),r=c("861d"),i=c("b622"),u=i("species"),l=n.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,o(e)&&(e===l||a(e.prototype))?e=void 0:r(e)&&(e=e[u],null===e&&(e=void 0))),void 0===e?l:e}},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var r=n(e);r in t?a.f(t,r,o(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),r=c("e8b5"),i=c("861d"),u=c("7b0b"),l=c("07fa"),s=c("8418"),d=c("65f0"),b=c("1dde"),g=c("b622"),j=c("2d00"),p=g("isConcatSpreadable"),O=9007199254740991,f="Maximum allowed index exceeded",h=a.TypeError,v=j>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),m=b("concat"),y=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},x=!v||!m;n({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,n,a,o,r=u(this),i=d(r,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?r:arguments[e],y(o)){if(a=l(o),b+a>O)throw h(f);for(c=0;c<a;c++,b++)c in o&&s(i,b,o[c])}else{if(b>=O)throw h(f);s(i,b++,o)}return i.length=b,i}})},cc55:function(t,e,c){"use strict";c.r(e);c("99af");var n=c("7a23"),a={class:"container"},o=Object(n["g"])("h2",null,"購物車",-1),r={class:"table align-middle"},i=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"圖片"),Object(n["g"])("th",null,"商品名稱"),Object(n["g"])("th",null,"價格"),Object(n["g"])("th")])],-1),u={style:{width:"200px"}},l={key:0,class:"h5"},s={key:1},d={class:"h6"},b={class:"h5"},g={class:"btn-group btn-group-sm"},j=["onClick","disabled"],p=["onClick","disabled"],O={class:"spinner-grow spinner-grow-sm"},f=Object(n["h"])(" 加到購物車 "),h={class:"text-end"},v={class:"table align-middle"},m=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th"),Object(n["g"])("th",null,"品名"),Object(n["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["g"])("th",null,"單價")])],-1),y=["onClick"],x={class:"input-group input-group-sm"},C={class:"input-group mb-3"},k=["onUpdate:modelValue","onChange"],A=["value"],w={class:"input-group-text",id:"basic-addon2"},I={class:"text-end"},L=Object(n["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"};function $(t,e,c,$,q,P){return Object(n["t"])(),Object(n["f"])("div",a,[o,Object(n["g"])("table",r,[i,Object(n["g"])("tbody",null,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(q.products,(function(e){return Object(n["t"])(),Object(n["f"])("tr",{key:e.id},[Object(n["g"])("td",u,[Object(n["g"])("div",{style:Object(n["p"])([{backgroundImage:"url(".concat(e.imageUrl,")")},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),Object(n["g"])("td",null,Object(n["A"])(e.title),1),Object(n["g"])("td",null,[e.price===e.origin_price?(Object(n["t"])(),Object(n["f"])("div",l,Object(n["A"])(e.price)+" 元 ",1)):(Object(n["t"])(),Object(n["f"])("div",s,[Object(n["g"])("del",d,"原價 "+Object(n["A"])(e.origin_price)+" 元",1),Object(n["g"])("div",b,"現在只要 "+Object(n["A"])(e.price)+" 元",1)]))]),Object(n["g"])("td",null,[Object(n["g"])("div",g,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(c){return t.openProductModal(e.id)},disabled:q.isLoadingItem===e.id}," 查看更多 ",8,j),Object(n["g"])("button",{type:"button",class:"btn btn-danger",onClick:function(t){return P.addToCart(e.id)},disabled:q.isLoadingItem===e.id},[Object(n["H"])(Object(n["g"])("span",O,null,512),[[n["E"],q.isLoadingItem===e.id]]),f],8,p)])])])})),128))])]),Object(n["g"])("div",h,[Object(n["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=function(){return P.deleteAllCarts&&P.deleteAllCarts.apply(P,arguments)})}," 清空購物車 ")]),Object(n["g"])("table",v,[m,Object(n["g"])("tbody",null,[q.cartData.carts?(Object(n["t"])(!0),Object(n["f"])(n["a"],{key:0},Object(n["x"])(q.cartData.carts,(function(e){return Object(n["t"])(),Object(n["f"])("tr",{key:e.id},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(c){return t.removeCartItem(e.id)}}," x ",8,y)]),Object(n["g"])("td",null,Object(n["A"])(e.product.title),1),Object(n["g"])("td",null,[Object(n["g"])("div",x,[Object(n["g"])("div",C,[Object(n["H"])(Object(n["g"])("select",{id:"",class:"form-select","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(c){return t.updateCartItem(e)}},[(Object(n["t"])(),Object(n["f"])(n["a"],null,Object(n["x"])(20,(function(t){return Object(n["g"])("option",{value:t,key:"".concat(t,"-").concat(e.id)},Object(n["A"])(t),9,A)})),64))],40,k),[[n["C"],e.qty]]),Object(n["g"])("span",w,Object(n["A"])(e.product.unit),1)])])]),Object(n["g"])("td",I,Object(n["A"])(e.total),1)])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[L,Object(n["g"])("td",D,Object(n["A"])(q.cartData.total),1)])])])])}var q=c("1344"),P=Object(q["a"])(),T=P,U={data:function(){return{products:[],cartData:{},isLoadingItem:""}},methods:{getProducts:function(){var t=this;this.$http("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/products/all")).then((function(e){t.products=e.data.products}))},addToCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={product_id:t,qty:c};this.isLoadingItem=t,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/cart"),{data:n}).then((function(t){e.getCart(),e.isLoadingItem="",T.emit("get-cart")}))},getCart:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/cart")).then((function(e){t.cartData=e.data.data}))},deleteAllCarts:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/carts")).then((function(e){alert(e.data.message),t.getCart()})).catch((function(t){alert(t.data.message)}))}},mounted:function(){var t=this;this.getProducts(),T.on("get-cart",(function(){t.getCart()}))}},_=c("6b0d"),E=c.n(_);const H=E()(U,[["render",$]]);e["default"]=H},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-3a60c783.797721e1.js.map